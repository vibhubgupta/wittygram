(this.webpackJsonpwittygram=this.webpackJsonpwittygram||[]).push([[0],{105:function(e,t){},108:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(26),c=a.n(s),o=a(6),i=(a(74),a(2)),l=a(3),u=a(5),m=a(4),d=a(14),p=a(8),h="https://codeial.codingninjas.com:8000/api/v2",f=function(){return"".concat(h,"/users/login")},E=function(){return"".concat(h,"/users/signup")},v=function(){return"".concat(h,"/users/edit")},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return"".concat(h,"/posts?page=").concat(e,"&limit=").concat(t)},b=function(e){return"".concat(h,"/users/").concat(e)},S=function(){return"".concat(h,"/friendship/fetch_user_friends")},C=function(e){return"".concat(h,"/friendship/create_friendship?user_id=").concat(e)},O=function(e){return"".concat(h,"/friendship/remove_friendship?user_id=").concat(e)},N=function(){return"".concat(h,"/posts/create")},j=function(){return"".concat(h,"/comments/")},y=function(e,t){return"".concat(h,"/likes/toggle?likeable_id=").concat(e,"&likeable_type=").concat(t)},A=function(e){return"".concat(h,"/users/search?text=").concat(e)};function w(e){var t=[];for(var a in e){var n=encodeURIComponent(a),r=encodeURIComponent(e[a]);t.push(n+"="+r)}return t.join("&")}function T(){return localStorage.getItem("token")}function k(){return function(e){var t=g();fetch(t).then((function(e){return e.json()})).then((function(t){console.log(t),e({type:"UPDATE_POSTS",posts:t.data.posts})}))}}function L(e,t){return function(a){var n=j();fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())},body:w({content:e,post_id:t})}).then((function(e){return e.json()})).then((function(e){e.success&&a(function(e,t){return{type:"ADD_COMMENT",comment:e,postId:t}}(e.data.comment,t))}))}}function I(e,t,a){return function(n){var r=y(e,t);fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())}}).then((function(e){return e.json()})).then((function(t){console.log("LIKE DATA",t),t.success&&n(function(e,t){return{type:"UPDATE_POST_LIKE",postId:e,userId:t}}(e,a))}))}}var U=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.posts;return r.a.createElement("div",{className:"posts-list"},r.a.createElement(se,null),e.map((function(e){return r.a.createElement(oe,{post:e,key:e._id})})))}}]),a}(n.Component),P=a(59),x=a.n(P);function R(e,t,a,n){return function(r){var s=E();fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w({email:e,password:t,confirm_password:a,name:n})}).then((function(e){return e.json()})).then((function(e){if(e.success)return localStorage.setItem("token",e.data.token),void r((t=e.data.user,{type:"SIGNUP_SUCCESS",user:t}));var t;r({type:"SIGNUP_FAILED",error:e.message})}))}}function F(e){return function(t){var a=A(e);fetch(a,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())}}).then((function(e){return e.json()})).then((function(e){console.log("SEARCH data",e),e.success?t(D(e.data.users)):t(D([]))}))}}function D(e){return{type:"FETCH_SEARCH_RESULTS_SUCCESS",users:e}}var G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).logOut=function(){localStorage.removeItem("token"),e.props.dispatch({type:"LOG_OUT"})},e.handleSearch=function(t){var a=t.target.value;e.props.dispatch(F(a))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.results;return r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"left-div"},r.a.createElement(p.b,{to:"/"},r.a.createElement("img",{src:x.a,alt:"logo"}))),r.a.createElement("div",{className:"search-container"},r.a.createElement("img",{className:"search-icon",src:"https://cdn-icons-png.flaticon.com/512/54/54481.png",alt:"search-icon"}),r.a.createElement("input",{placeholder:"Search",onChange:this.handleSearch}),a.length>0&&r.a.createElement("div",{className:"search-results"},r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",{className:"search-results-row",key:e._id},r.a.createElement(p.b,{to:"/user/".concat(e._id)},r.a.createElement("img",{src:"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"user-dp"}),r.a.createElement("span",null,e.name)))}))))),r.a.createElement("div",{className:"right-nav"},t.isLoggedin&&r.a.createElement("div",{className:"user"},r.a.createElement(p.b,{to:"/settings"},r.a.createElement("img",{src:"https://picsum.photos/200/200",alt:"user-dp",id:"user-dp"})),r.a.createElement("span",null,t.user.name)),r.a.createElement("div",{className:"nav-links"},r.a.createElement("ul",null,!t.isLoggedin&&r.a.createElement("li",null,r.a.createElement(p.b,{to:"/login"},"Log in")),t.isLoggedin&&r.a.createElement("li",{onClick:this.logOut},"Log out"),!t.isLoggedin&&r.a.createElement("li",null,r.a.createElement(p.b,{to:"/signup"},"Register"))))))}}]),a}(r.a.Component);var W=Object(o.b)((function(e){return{auth:e.auth,results:e.search.results}}))(G),M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.posts,a=e.friends,n=e.isLoggedin;return r.a.createElement("div",{className:"home"},r.a.createElement(U,{posts:t}),n&&r.a.createElement(ae,{friends:a}),n&&r.a.createElement(he,null))}}]),a}(n.Component);var z=function(e){return r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center"}},"Welcome to Wittygram "),r.a.createElement("h3",{style:{textAlign:"center"}},"Login/Sign up to get started! "),r.a.createElement("br",null),r.a.createElement("p",{style:{margin:10}},"If this page keeps popping up, it's most probably your own fault!"," "),r.a.createElement("p",null,r.a.createElement("a",{href:"https://vibhubgupta.github.io/myportfolio/"},"Contact us here")))},B=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleEmailChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleFormSubmit=function(e){e.preventDefault(),console.log("this.state",n.state);var t=n.state,a=t.email,r=t.password;a&&r&&n.props.dispatch(function(e,t){return function(a){a({type:"LOGIN_START"});var n=f();fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(console.log("data",e),e.success)return localStorage.setItem("token",e.data.token),void a((t=e.data.user,{type:"LOGIN_SUCCESS",user:t}));var t;a({type:"LOGIN_FAILED",error:e.message})}))}}(a,r))},n.state={email:"",password:""},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_AUTH_STATE"})}},{key:"render",value:function(){var e=this.props.auth,t=e.error,a=e.inProgress,n=e.isLoggedin,s=(this.props.location.state||{from:{pathname:"/"}}).from;return n?r.a.createElement(d.a,{to:s}):r.a.createElement("form",{className:"login-form"},r.a.createElement("span",{className:"login-signup-header"},"Log In"),t&&r.a.createElement("div",{className:"alert error-dailog"},t),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"email",placeholder:"Email",required:!0,onChange:this.handleEmailChange,value:this.state.email})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"password",placeholder:"Password",required:!0,onChange:this.handlePasswordChange,value:this.state.password})),r.a.createElement("div",{className:"field"},a?r.a.createElement("button",{onClick:this.handleFormSubmit,disabled:a},"Logging in..."):r.a.createElement("button",{onClick:this.handleFormSubmit,disabled:a},"Log In")))}}]),a}(n.Component);var H=Object(o.b)((function(e){return{auth:e.auth}}))(B),Z=a(18),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e,t){n.setState(Object(Z.a)({},e,t))},n.onFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,r=t.password,s=t.confirmPassword,c=t.name;a&&r&&s&&c&&(n.props.dispatch({type:"SIGNUP_START"}),n.props.dispatch(R(a,r,s,c)))},n.state={email:"",password:"",name:"",confirmPassword:""},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_AUTH_STATE"})}},{key:"render",value:function(){var e=this,t=this.props.auth,a=t.inProgress,n=t.error;return t.isLoggedin?r.a.createElement(d.a,{to:"/"}):r.a.createElement("form",{className:"login-form"},r.a.createElement("span",{className:"login-signup-header"}," Signup"),n&&r.a.createElement("div",{className:"alert error-dailog"},n),r.a.createElement("div",{className:"field"},r.a.createElement("input",{placeholder:"Name",type:"text",required:!0,onChange:function(t){return e.handleInputChange("name",t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{placeholder:"Email",type:"email",required:!0,onChange:function(t){return e.handleInputChange("email",t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{placeholder:"Confirm password",type:"password",required:!0,onChange:function(t){return e.handleInputChange("confirmPassword",t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{placeholder:"Password",type:"password",required:!0,onChange:function(t){return e.handleInputChange("password",t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("button",{onClick:this.onFormSubmit,disabled:a},"Signup")))}}]),a}(n.Component),V=Object(o.b)((function(e){return{auth:e.auth}}))(X),q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){n.setState(Object(Z.a)({},e,t))},n.handleSave=function(){var e=n.state,t=e.password,a=e.confirmPassword,r=e.name,s=n.props.auth.user;n.props.dispatch(function(e,t,a,n){return function(r){var s=v();fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())},body:w({name:e,password:t,confirm_password:a,id:n})}).then((function(e){return e.json()})).then((function(e){if(console.log("EDIT PROFIle data",e),e.success)return r({type:"EDIT_USER_SUCCESSFUL",user:e.data.user}),void(e.data.token&&localStorage.setItem("token",e.data.token));r({type:"EDIT_USER_SUCCESSFUL",error:e.message})}))}}(r,t,a,s._id))},n.state={name:e.auth.user.name,password:"",confirmPassword:"",editMode:!1},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_AUTH_STATE"})}},{key:"render",value:function(){var e=this,t=this.props.auth,a=t.user,n=t.error,s=this.state.editMode;return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"https://picsum.photos/200/200",alt:"user-dp"})),n&&r.a.createElement("div",{className:"alert error-dailog"},n),!1===n&&r.a.createElement("div",{className:"alert success-dailog"},"Successfully updated profile!"),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Email"),r.a.createElement("div",{className:"field-value"},a.email)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Name"),s?r.a.createElement("input",{type:"text",onChange:function(t){return e.handleChange("name",t.target.value)},value:this.state.name}):r.a.createElement("div",{className:"field-value"},a.name)),s&&r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"New password"),r.a.createElement("input",{type:"password",onChange:function(t){return e.handleChange("password",t.target.value)},value:this.state.password})),s&&r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Confirm password"),r.a.createElement("input",{type:"password",onChange:function(t){return e.handleChange("confirmPassword",t.target.value)},value:this.state.confirmPassword})),r.a.createElement("div",{className:"btn-grp"},s?r.a.createElement("button",{className:"button save-btn",onClick:this.handleSave},"Save"):r.a.createElement("button",{className:"button edit-btn",onClick:function(){return e.handleChange("editMode",!0)}},"Edit profile"),s&&r.a.createElement("div",{className:"go-back",onClick:function(){return e.handleChange("editMode",!1)}},"Go back")))}}]),a}(n.Component);var _=Object(o.b)((function(e){return{auth:e.auth}}))(q),K=a(20),Y=a.n(K),J=a(40);function Q(e){return function(t){t({type:"FETCH_USER_PROFILE"});var a=b(e);fetch(a,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())}}).then((function(e){return e.json()})).then((function(e){t({type:"USER_PROFILE_SUCCESS",user:e.data.user})}))}}function $(e){return function(t){var a=S(e);fetch(a,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())}}).then((function(e){return e.json()})).then((function(e){console.log("data",e),t({type:"FETCH_FRIENDS_SUCCESS",friends:e.data.friends})}))}}var ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).checkIfUserIsAFriend=function(){console.log("this.props",n.props);var e=n.props,t=e.match,a=e.friends,r=t.params.userId;return-1!==a.map((function(e){return e.to_user._id})).indexOf(r)},n.handleAddFriendClick=Object(J.a)(Y.a.mark((function e(){var t,a,r,s,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.userId,a=C(t),r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())}},e.next=5,fetch(a,r);case 5:return s=e.sent,e.next=8,s.json();case 8:(c=e.sent).success?(n.setState({success:!0,successMessage:"Added friend successfully!"}),n.props.dispatch({type:"ADD_FRIEND",friend:c.data.friendship})):n.setState({success:null,error:c.message});case 10:case"end":return e.stop()}}),e)}))),n.handleRemoveFriendClick=Object(J.a)(Y.a.mark((function e(){var t,a,r,s,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match,a=O(t.params.userId),r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())}},e.next=5,fetch(a,r);case 5:return s=e.sent,e.next=8,s.json();case 8:c=e.sent,console.log("await data",c),c.success?(n.setState({success:!0,successMessage:"Removed friends successfully!"}),n.props.dispatch({type:"REMOVE_FRIEND",userId:t.params.userId})):n.setState({success:null,error:c.message});case 11:case"end":return e.stop()}}),e)}))),n.state={success:null,error:null,successMessage:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match;e.params.userId&&this.props.dispatch(Q(e.params.userId))}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,a=this.props.match.params;t&&a&&t.userId!==a.userId&&this.props.dispatch(Q(a.userId))}},{key:"render",value:function(){var e=this.props,t=e.match.params,a=e.profile;console.log("this.props",t);var n=a.user;if(a.inProgress)return r.a.createElement("h1",null,"Loading!");var s=this.checkIfUserIsAFriend(),c=this.state,o=c.success,i=c.error,l=c.successMessage;return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:"https://picsum.photos/200",alt:"user-dp"})),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Name"),r.a.createElement("div",{className:"field-value"},n.name)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field-label"},"Email"),r.a.createElement("div",{className:"field-value"},n.email)),r.a.createElement("div",{className:"btn-grp"},s?r.a.createElement("button",{className:"button save-btn",onClick:this.handleRemoveFriendClick},"Remove Friend"):r.a.createElement("button",{className:"button save-btn",onClick:this.handleAddFriendClick},"Add Friend"),o&&r.a.createElement("div",{className:"alert success-dailog"},l),i&&r.a.createElement("div",{className:"alert error-dailog"},i)))}}]),a}(n.Component);var te=Object(o.b)((function(e){return{profile:e.profile,friends:e.friends}}))(ee),ae=function(e){return r.a.createElement("div",{className:"friends-list"},r.a.createElement("div",{className:"header"},"Friends"),e.friends&&0===e.friends.length&&r.a.createElement("div",{className:"no-friends"},"No friends found!"),e.friends&&e.friends.map((function(e){return r.a.createElement(ne,{friend:e.to_user,key:e._id})})))};var ne=function(e){return r.a.createElement("div",null,r.a.createElement(p.b,{className:"friends-item",to:"user/".concat(e.friend._id)},r.a.createElement("div",{className:"friends-img"},r.a.createElement("img",{src:"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"user-pic"})),r.a.createElement("div",{className:"friends-name"},e.friend.email)))},re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleOnClick=function(){var e;n.props.dispatch((e=n.state.content,function(t){var a=N();fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(T())},body:w({content:e})}).then((function(e){return e.json()})).then((function(e){console.log("dATA",e),e.success&&t({type:"ADD_POST",post:e.data.post})}))}))},n.handleChange=function(e){n.setState({content:e.target.value})},n.state={content:""},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"create-post"},r.a.createElement("textarea",{className:"add-post",value:this.state.content,onChange:this.handleChange,placeholder:"Share with your network"}),r.a.createElement("div",null,r.a.createElement("button",{id:"add-post-btn",onClick:this.handleOnClick},"Add Post")))}}]),a}(n.Component),se=Object(o.b)()(re),ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleAddComment=function(e){var t=n.state.comment,a=n.props.post;"Enter"===e.key&&(n.props.dispatch(L(t,a._id)),n.setState({comment:""}))},n.handleOnCommentChange=function(e){n.setState({comment:e.target.value})},n.handlePostLike=function(){var e=n.props,t=e.post,a=e.user;n.props.dispatch(I(t._id,"Post",a._id))},n.state={comment:""},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.user,n=this.state.comment,s=t.likes.includes(a._id);return r.a.createElement("div",{className:"post-wrapper",key:t._id},r.a.createElement("div",{className:"post-header"},r.a.createElement("div",{className:"post-avatar"},r.a.createElement(p.b,{to:"/user/".concat(t.user._id)},r.a.createElement("img",{src:"https://cdn-icons-png.flaticon.com/512/149/149071.png",alt:"user-pic"})),r.a.createElement("div",null,r.a.createElement("span",{className:"post-author"},t.user.name),r.a.createElement("span",{className:"post-time"},"a minute ago"))),r.a.createElement("div",{className:"post-content"},t.content),r.a.createElement("div",{className:"post-actions"},r.a.createElement("button",{className:"post-like no-btn",onClick:this.handlePostLike},s?r.a.createElement("img",{src:"https://cdn-icons-png.flaticon.com/512/1076/1076984.png",alt:"like post"}):r.a.createElement("img",{src:"https://cdn-icons-png.flaticon.com/512/1077/1077035.png",alt:"likes-icon"}),r.a.createElement("span",null,t.likes.length)),r.a.createElement("div",{className:"post-comments-icon"},r.a.createElement("img",{src:"https://cdn-icons.flaticon.com/png/512/3114/premium/3114810.png?token=exp=1659082588~hmac=a81cc15f217b525b32778fd931d89aa4",alt:"comments-icon"}),r.a.createElement("span",null,t.comments.length))),r.a.createElement("div",{className:"post-comment-box"},r.a.createElement("input",{placeholder:"Start typing a comment",onChange:this.handleOnCommentChange,onKeyPress:this.handleAddComment,value:n})),r.a.createElement("div",{className:"post-comments-list"},t.comments.map((function(e){return r.a.createElement(ie,{comment:e,key:e._id,postId:t._id})})))))}}]),a}(n.Component);var oe=Object(o.b)((function(e){return{user:e.auth.user}}))(ce);var ie=function(e){var t=e.comment;return r.a.createElement("div",{className:"post-comment-item"},r.a.createElement("div",{className:"post-comment-header"},r.a.createElement("span",{className:"post-comment-author"},t.user.name),r.a.createElement("span",{className:"post-comment-time"},"a minute ago"),r.a.createElement("span",{className:"post-comment-likes"},t.likes.length," likes")),r.a.createElement("div",{className:"post-comment-content"},t.content))},le=a(13),ue=a(28),me=a(61),de=a.n(me),pe=(a(108),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setupConnections=function(){var e=n.socket,t=Object(ue.a)(n);n.socket.on("connect",(function(){console.log("CONNECTION ESTABLISHED"),e.emit("join_room",{user_email:this.userEmail,chatroom:"codeial"}),e.on("user_joined",(function(e){console.log("NEW USER JOINED",e)}))})),n.socket.on("receive_message",(function(e){var a=t.state.messages,n={};n.content=e.message,e.user_email===t.userEmail&&(n.self=!0),t.setState({messages:[].concat(Object(le.a)(a),[n]),typedMessage:""})}))},n.handleSubmit=function(){var e=n.state.typedMessage;e&&n.userEmail&&n.socket.emit("send_message",{message:e,user_email:n.userEmail,chatroom:"codeial"})},n.state={messages:[],typedMessage:""},n.socket=de.a.connect("http://54.237.158.65:5000"),n.userEmail=e.user.email,n.userEmail&&n.setupConnections(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.typedMessage,n=t.messages;return r.a.createElement("div",{className:"chat-container"},r.a.createElement("div",{className:"chat-header"},"Chat",r.a.createElement("img",{src:"https://www.iconsdb.com/icons/preview/white/minus-5-xxl.png",alt:"",height:17})),r.a.createElement("div",{className:"chat-messages"},n.map((function(e){return r.a.createElement("div",{className:e.self?"chat-bubble self-chat":"chat-bubble other-chat"},e.content)}))),r.a.createElement("div",{className:"chat-footer"},r.a.createElement("input",{type:"text",value:a,onChange:function(t){return e.setState({typedMessage:t.target.value})}}),r.a.createElement("button",{onClick:this.handleSubmit},"Submit")))}}]),a}(n.Component));var he=Object(o.b)((function(e){return{user:e.auth.user}}))(pe),fe=a(62),Ee=function(e){var t=e.isLoggedin,a=e.path,n=e.component;return r.a.createElement(d.b,{path:a,render:function(e){return t?r.a.createElement(n,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}})},ve=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(k());var e=T();if(e){var t=fe(e);console.log("user",t),this.props.dispatch(function(e){return{type:"AUTHENTICATE_USER",user:e}}({email:t.email,_id:t._id,name:t.name})),this.props.dispatch($())}}},{key:"render",value:function(){var e,t,a=this.props,n=a.posts,s=a.auth,c=a.friends,o=null!==(e=null===(t=document.querySelector("base"))||void 0===t?void 0:t.getAttribute("href"))&&void 0!==e?e:"/";return r.a.createElement(p.a,{basename:o},r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(M,Object.assign({},e,{posts:n,friends:c,isLoggedin:s.isLoggedin}))}}),r.a.createElement(d.b,{path:"/login",component:H}),r.a.createElement(d.b,{path:"/signup",component:V}),r.a.createElement(Ee,{path:"/settings",component:_,isLoggedin:s.isLoggedin}),r.a.createElement(Ee,{path:"/user/:userId",component:te,isLoggedin:s.isLoggedin}),r.a.createElement(d.b,{component:z}))))}}]),a}(r.a.Component);var ge=Object(o.b)((function(e){return{posts:e.posts,auth:e.auth,friends:e.friends}}))(ve),be=a(15),Se=a(63),Ce=a(64),Oe=a.n(Ce),Ne=a(7);var je={user:{},error:null,isLoggedin:!1,inProgress:!1};var ye={user:{},error:null,success:null,inProgress:!1};var Ae=[];var we={results:[]};var Te=Object(be.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_POSTS":return t.posts;case"ADD_POST":return[t.post].concat(Object(le.a)(e));case"ADD_COMMENT":var a=e.map((function(e){return e._id===t.postId?Object(Ne.a)({},e,{comments:[t.comment].concat(Object(le.a)(e.comments))}):e}));return a;case"UPDATE_POST_LIKE":var n=e.map((function(e){return e._id===t.postId?Object(Ne.a)({},e,{likes:[].concat(Object(le.a)(e.likes),[t.userId])}):e}));return n;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_AUTH_STATE":return Object(Ne.a)({},e,{error:null});case"LOGIN_START":case"SIGNUP_START":return Object(Ne.a)({},e,{inProgress:!0});case"LOGIN_SUCCESS":case"SIGNUP_SUCCESS":return Object(Ne.a)({},e,{user:t.user,isLoggedin:!0,inProgress:!1,error:null});case"LOGIN_FAILED":case"SIGNUP_FAILED":return Object(Ne.a)({},e,{inProgress:!1,error:t.error});case"AUTHENTICATE_USER":return Object(Ne.a)({},e,{user:t.user,isLoggedin:!0});case"LOG_OUT":return Object(Ne.a)({},e,{user:{},isLoggedin:!1});case"EDIT_USER_SUCCESSFUL":return Object(Ne.a)({},e,{user:t.user,error:!1});case"EDIT_USER_FAILED":return Object(Ne.a)({},e,{error:t.error});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_PROFILE_SUCCESS":return Object(Ne.a)({},e,{success:!0,user:t.user,inProgress:!1});case"USER_PROFILE_FAILURE":return Object(Ne.a)({},e,{error:t.error,inProgress:!1});case"FETCH_USER_PROFILE":return Object(Ne.a)({},e,{inProgress:!0});default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FRIENDS_SUCCESS":return Object(le.a)(t.friends);case"ADD_FRIEND":return e.concat(t.friend);case"REMOVE_FRIEND":var a=e.filter((function(e){return e.to_user._id!==t.userId}));return a;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SEARCH_RESULTS_SUCCESS":return Object(Ne.a)({},e,{results:t.users});default:return e}}});var ke=Object(be.d)(Te,Object(be.a)(Se.a,Oe.a));c.a.render(r.a.createElement(o.a,{store:ke},r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null))),document.getElementById("root"))},59:function(e,t){e.exports="data:image/png;base64,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"},65:function(e,t,a){e.exports=a(111)},74:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.04f4b9fc.chunk.js.map